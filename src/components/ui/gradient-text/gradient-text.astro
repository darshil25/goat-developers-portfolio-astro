---
import { cn } from "../../../lib/utils";

interface Props {
  class?: string;
  colors?: string[];
  animationSpeed?: number;
  showBorder?: boolean;
  [key: string]: any; // Allow generic props
}

const {
  class: className,
  colors = ["#40ffaa", "#4079ff", "#40ffaa", "#4079ff", "#40ffaa"],
  animationSpeed = 8,
  showBorder = false,
  ...rest
} = Astro.props;

// Construct the CSS variables for the inline styles
const gradientStyle = {
  backgroundImage: `linear-gradient(to right, ${colors.join(", ")})`,
  animationDuration: `${animationSpeed}s`,
};
---

<div
  class={cn(
    "relative mx-auto flex max-w-fit flex-row items-center justify-center rounded-[1.25rem] font-medium backdrop-blur-[10px] transition-shadow duration-500 ease-out overflow-hidden cursor-pointer",
    className
  )}
  {...rest}
>
  {showBorder && (
    <div
      class="gradient-overlay absolute inset-0 bg-[length:300%_100%] rounded-[inherit] z-0 pointer-events-none"
      style={gradientStyle}
    >
      {/* Inner background to create the border effect */}
      <div
        class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[calc(100%-2px)] h-[calc(100%-2px)] rounded-[inherit] bg-[#060010] -z-10"
      >
      </div>
    </div>
  )}

  <div
    class="text-content relative z-10 inline-block bg-[length:300%_100%] bg-clip-text text-transparent"
    style={gradientStyle}
  >
    <slot />
  </div>
</div>

<style>
  /* We define the animation here to keep the component self-contained 
    without requiring changes to your global tailwind.config.js 
  */
  @keyframes gradient {
    0% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
    100% {
      background-position: 0% 50%;
    }
  }

  .gradient-overlay,
  .text-content {
    animation-name: gradient;
    animation-timing-function: linear;
    animation-iteration-count: infinite;
  }
</style>