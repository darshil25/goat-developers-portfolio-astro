---
import { cn } from "../../lib/utils";
import LiveLinkDiv from '../../components/ui/reusable/LiveLinkDiv.astro';
import UnderDevelopment from '../../components/ui/reusable/UnderDevelopment.astro';
import NDA from '../../components/ui/reusable/NDA.astro';
import BrandLogo from '../../components/BrandLogo.astro';
import CurvedCard from "@/components/ui/reusable/curved-card/curved-card.astro";

interface Props {
  status: 'live' | 'under-development' | 'nda';
  logo?: string;
  link: string;
  logoSize: { width: number; height: number };
  title: string;
  tags: string[];
  description: string;
  thumbnail: string;
  imageTags?: string[];
  isVanquish?: boolean; 
}

const { status, logo, link, logoSize, title, tags, description, thumbnail, imageTags, isVanquish } = Astro.props;
const textGradientClass = "bg-[linear-gradient(92deg,rgba(255,255,255,0.02)_0.69%,rgba(255,255,255,0.5)_15.59%,#f7dcff_49.39%,rgba(255,255,255,0.5)_85.1%,rgba(255,255,255,0.02)_100%)] bg-clip-text text-transparent";
---

<CurvedCard
  link={link}
  class={cn(
    "flex relative bg-[#100f13] rounded-[20px] border border-white/5 overflow-hidden transition-all duration-300",
    // Mobile: Padding & Column
    "w-full flex-col p-5 pb-12 gap-4",
    // Tablet/Desktop: Row & Padding
    "max-w-6xl min-[700px]:flex-row min-[700px]:p-6 min-[700px]:pb-12 min-[700px]:gap-4"
  )}
>
{/* --- CORNER TAGS --- */}
    <div class="absolute top-0 right-5">
      {status === 'live' && <LiveLinkDiv class="" />}
      {status === 'under-development' && <UnderDevelopment class="py-1 px-2 gap-2" />}
      {status === 'nda' && <NDA className="py-1 px-2 gap-2" />}
    </div>
    
    {/* --- LEFT SECTION --- */}
    <div class="flex flex-col justify-between gap-4">
      {/* Upper Title Area */}
      <div class="flex flex-col gap-5">
        
        {/* Logo & Title Badge */}
        <div class="flex items-center flex-wrap gap-4 p-1 px-2 rounded-sm bg-[#0a0a0a] w-fit">
          {isVanquish ? (
            <div class="flex items-center gap-1">
              {/* Using our migrated BrandLogo component */}
              <BrandLogo brand="vanquish" class="size-6 text-white" />
              <p class="text-[20px] text-[#fbfbfb]">Vanquish Solutions</p>
            </div>
          ) : (
            logo && <img src={logo} alt={title} width={logoSize.width} height={logoSize.height} />
          )}
          <p class="text-[#fbfbfb] max-w-sm">{title}</p>
        </div>

        {/* Tags */}
        <div class="flex items-center flex-wrap gap-2 min-[700px]:gap-6">
          {tags.map((tag) => (
            <p class={cn("rounded-sm bg-[#0a0a0a] leading-tight text-[10px] p-1", textGradientClass)}>
              {tag}
            </p>
          ))}
        </div>
      </div>

      <p class="text-[12px] leading-tight max-w-sm text-gray-400">
        {description}
      </p>
    </div>

    <div class="relative flex items-center justify-center overflow-hidden rounded-[10px] bg-[#0a0a0a] w-full min-[700px]:w-auto min-[700px]:max-w-sm">
      <img 
        src={thumbnail} 
        alt="Thumbnail" 
        width="380" 
        height="260"
        class="w-full h-auto object-cover grayscale transition-all duration-300 transform scale-100 group-hover:grayscale-0 group-hover:scale-110"
      />
      
      {imageTags && (
        <div class="absolute flex gap-1.5 top-[5%] left-[5%] z-10">
          {imageTags.map((tag) => (
            <p class="p-0.5 rounded-sm bg-[#171717] leading-tight text-[#818181] text-[10px]">
              {tag}
            </p>
          ))}
        </div>
      )}
    </div>

    

  </CurvedCard>